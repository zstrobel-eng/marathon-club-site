<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard - UW-Madison Marathon Club</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- Banner -->
    <section id="topBanner">
      <img src="banner.JPG" alt="Marathon Banner" class="banner" />
    </section>

    <!-- Navbar -->
    <nav
      class="navbar site-navbar is-spaced"
      role="navigation"
      aria-label="main navigation"
    >
      <div class="navbar-brand">
        <a class="navbar-item" href="index.html">
          <strong class="has-text-white">UW-Madison Marathon</strong>
        </a>
        <a
          role="button"
          class="navbar-burger"
          aria-label="menu"
          aria-expanded="false"
          data-target="navMenu"
        >
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>

      <div id="navMenu" class="navbar-menu">
        <div class="navbar-start">
          <a class="navbar-item" href="index.html">Home</a>
          <a class="navbar-item" href="routes.html">Routes</a>
          <a class="navbar-item" href="resources.html">Resources</a>
          <a class="navbar-item" href="calendar.html">Calendar</a>
          <a class="navbar-item is-hidden" href="training.html"
            >Training Plan</a
          >
          <a class="navbar-item" href="leadership.html">Leadership</a>
          <a class="navbar-item" href="about.html">About</a>
          <a class="navbar-item adminNav is-hidden" href="admin.html">Admin</a>
        </div>

        <div class="navbar-end">
          <div class="navbar-item">
            <div class="buttons">
              <a id="signUpBtn" class="button is-light signedOut">Sign Up</a>
              <a id="signInBtn" class="button is-light signedOut">Sign In</a>
              <a id="signOutBtn" class="button is-light signedIn is-hidden"
                >Sign Out</a
              >
              <a id="profileBtn" class="button is-light signedIn is-hidden"
                >Profile</a
              >
            </div>
          </div>
        </div>
      </div>
    </nav>

    <!-- Message bar -->
    <div
      class="p-3 is-hidden has-text-centered text_white has-text-weight-bold"
      id="messages"
    ></div>

    <!-- Dashboard -->
    <section class="section">
      <div class="container">
        <h1 class="title">Admin Dashboard</h1>
        <p class="subtitle">Manage club content, events, and users here.</p>

        <div class="columns is-multiline">
          <!-- Users -->
          <div class="column is-half">
            <div class="card">
              <header class="card-header">
                <p class="card-header-title">Users</p>
              </header>
              <div class="card-content">
                <p id="memberCount"></p>
                <h3 class="is-6 pt-3"><strong>Manage User Accounts</strong></h3>
                <p class="pt-2">
                  To manage user accounts, click the "Manage Users" button
                  below.
                </p>
                <p class="pt-2">
                  Within the "Manage Users" section you can search for users,
                  edit their information, or delete accounts as necessary.
                </p>
                <p class="pt-2">
                  <strong>Note:</strong>
                </p>
                <ul>
                  <li class="pt-2">
                    - Be cautious when deleting user accounts, as this action
                    cannot be undone.
                  </li>
                  <li class="pt-2">
                    - Selecting the "Admin User" checkbox will grant the user
                    admin privileges. Admin priveleges allow users to access the
                    admin dashboard and manage site content.
                  </li>
                </ul>
              </div>
              <footer class="card-footer">
                <a
                  class="card-footer-item modal-trigger"
                  data-target="manageUsersModal"
                  >Manage Users</a
                >
              </footer>
            </div>
          </div>

          <!-- Routes -->
          <div class="column is-half">
            <div class="card">
              <header class="card-header">
                <p class="card-header-title">Routes</p>
              </header>
              <div class="card-content">
                <h2 class="pb-2 is-6">
                  <strong>Add New Routes to the Website:</strong>
                </h2>
                <p>
                  To add a new route, click the "Add Route" button below and
                  fill out the route details in the form.
                </p>
                <p class="pt-2">
                  <strong>Note: </strong>The Strava embed information can only
                  be found on the Strava web page for public activities or
                  routes posted to Strava. Useually the embed link is found by
                  clicking the "Share" button on a Strava route or activity and
                  selecting "Embed".
                </p>
                <p class="pt-2">Embedded Strava links will look like this:</p>
                <p>
                  &lt;div class=&quot;strava-embed-placeholder&quot;
                  data-embed-type=&quot;activity&quot;
                  data-embed-id=&quot;123456789&quot;
                  data-style=&quot;standard&quot;
                  data-from-embed=&quot;false&quot;&gt;&lt;/div&gt;&lt;script
                  src=&quot;https://strava-embeds.com/embed.js&quot;&gt;&lt;/script&gt;
                </p>
                <h2 class="pb-2 pt-4 is-6">
                  <strong>Manage Current Routes on the Website:</strong>
                </h2>
                <p>
                  Use the "Manage Routes" button below to edit or delete
                  existing routes listed on the website.
                </p>
              </div>
              <footer class="card-footer">
                <a
                  class="card-footer-item modal-trigger"
                  data-target="addRouteModal"
                  >Add Route</a
                >
                <a
                  class="card-footer-item modal-trigger"
                  data-target="manageRoutesModal"
                  >Manage Routes</a
                >
              </footer>
            </div>
          </div>

          <!-- Events -->
          <div class="column is-half">
            <div class="card">
              <header class="card-header">
                <p class="card-header-title">Events</p>
              </header>
              <div class="card-content">
                <p><strong>Manage Events:</strong></p>
                <p class="pt-2">
                  Create events that are added to the website calendar page
                </p>
                <p class="pt-2">
                  Edit or delete existing events from the calendar
                </p>
              </div>
              <footer class="card-footer">
                <a
                  class="card-footer-item modal-trigger"
                  data-target="createEventModal"
                  >Create Event</a
                >
                <a
                  class="card-footer-item modal-trigger"
                  data-target="manageEventsModal"
                  >Manage Events</a
                >
              </footer>
            </div>
          </div>

          <!-- Analytics -->
          <!-- <div class="column is-half">
            <div class="card">
              <header class="card-header">
                <p class="card-header-title">Analytics</p>
              </header>
              <div class="card-content">
                <p><strong>Site Visits:</strong> 325 this month</p>
                <p><strong>Active Members:</strong> 18 logged in this week</p>
                <p><strong>Most Viewed Page:</strong> Routes</p>
              </div>
              <footer class="card-footer">
                <a href="#" class="card-footer-item">View Reports</a>
              </footer>
            </div>
          </div> -->
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer>
      <p>&copy; 2025 UW-Madison Marathon Club</p>
    </footer>

    <!-- Sign Up Modal -->
    <div id="signUpModal" class="modal">
      <div class="modal-background"></div>
      <div class="modal-card">
        <header class="modal-card-head">
          <p class="modal-card-title">Sign Up</p>
          <button id="signUpClose" class="delete" aria-label="close"></button>
        </header>

        <!-- FORM START -->
        <form id="signUpForm" class="modal-card-body">
          <div class="field">
            <label class="label">Email</label>
            <div class="control">
              <input
                id="signUpEmail"
                name="email"
                class="input"
                type="email"
                placeholder="Enter email"
                required
              />
            </div>
          </div>
          <div class="field">
            <label class="label">Password</label>
            <div class="control">
              <input
                id="signUpPassword"
                name="password"
                class="input"
                type="password"
                placeholder="Enter password"
                required
              />
            </div>
          </div>
          <p id="signupMessage" class="has-text-success"></p>

          <footer class="modal-card-foot">
            <button type="submit" class="button is-primary">Sign Up</button>
          </footer>
        </form>
        <!-- FORM END -->
      </div>
    </div>

    <!-- Sign In Modal -->
    <div id="signInModal" class="modal">
      <div class="modal-background"></div>
      <div class="modal-card">
        <header class="modal-card-head">
          <p class="modal-card-title">Sign In</p>
          <button id="signInClose" class="delete" aria-label="close"></button>
        </header>

        <!-- FORM START -->
        <form id="signInForm" class="modal-card-body">
          <div class="field">
            <label class="label">Email</label>
            <div class="control">
              <input
                id="signInEmail"
                name="email"
                class="input"
                type="email"
                placeholder="Enter email"
                required
              />
            </div>
          </div>

          <div class="field">
            <label class="label">Password</label>
            <div class="control">
              <input
                id="signInPassword"
                name="password"
                class="input"
                type="password"
                placeholder="Enter password"
                required
              />
            </div>
          </div>

          <!-- revised this feature so that admins dont use the code to sign in -->
          <!-- <div class="field">
            <label class="checkbox">
              <input type="checkbox" id="adminToggle" /> Sign in as admin
            </label>
          </div>

          <div class="field is-hidden" id="adminCodeField">
            <label class="label">Admin Code</label>
            <div class="control">
              <input
                id="adminCodeInput"
                name="adminCode"
                class="input"
                type="password"
                placeholder="Enter admin code"
              />
            </div>
          </div> -->

          <footer class="modal-card-foot">
            <button type="submit" class="button is-primary">Sign In</button>
          </footer>
        </form>
        <!-- FORM END -->
      </div>
    </div>

    <!-- Profile Modal -->
    <div id="profileModal" class="modal">
      <div class="modal-background"></div>
      <div class="modal-card">
        <header class="modal-card-head">
          <p class="modal-card-title">Profile</p>
          <button id="profileClose" class="delete" aria-label="close"></button>
        </header>
        <section class="modal-card-body">
          <p><strong>Name:</strong> <span id="profileName"></span></p>
          <p><strong>Email:</strong> <span id="userEmail"></span></p>
          <p>You are currently signed in an admin!</p>
        </section>
      </div>
    </div>

    <!-- Placeholder Modals -->
    <!-- <div id="manageUsersModal" class="modal">
      <div class="modal-background"></div>
      <div class="modal-card">
        <header class="modal-card-head">
          <p class="modal-card-title">Manage Users</p>
          <button class="delete close-modal" aria-label="close"></button>
        </header>
        <section class="modal-card-body">
          <p>This is where user management (edit/delete users) will appear.</p>
        </section>
      </div>
    </div> -->

    <div id="manageUsersModal" class="modal">
      <div class="modal-background"></div>
      <div class="modal-card">
        <header class="modal-card-head">
          <p class="modal-card-title">Manage Users</p>
          <button class="delete close-modal"></button>
        </header>

        <section class="modal-card-body">
          <!-- SEARCH SECTION -->
          <div class="field">
            <label class="label">Search Users</label>
            <input
              id="userSearch"
              class="input"
              type="text"
              placeholder="Search by name or email"
            />
          </div>

          <div id="userSuggestions" class="box"></div>

          <hr />

          <!-- EDIT USER SECTION -->
          <div id="editUserSection" class="is-hidden">
            <h2 class="subtitle">Edit User</h2>

            <div class="field">
              <label class="label">Name</label>
              <input id="editUserName" class="input" type="text" />
            </div>

            <div class="field">
              <label class="label">Email</label>
              <input id="editUserEmail" class="input" type="email" />
            </div>

            <div class="field">
              <label class="checkbox">
                <input type="checkbox" id="editIsAdmin" /> Admin User
              </label>
            </div>

            <button id="saveUserChanges" class="button is-primary">
              Save Changes
            </button>
            <button id="deleteUser" class="button is-danger">
              Delete User
            </button>
          </div>

          <hr />

          <!-- ADD NEW USER -->
          <h2 class="subtitle is-hidden">Add New User</h2>

          <div class="field is-hidden">
            <input
              id="newUserName"
              class="input"
              type="text"
              placeholder="Name"
            />
          </div>

          <div class="field is-hidden">
            <input
              id="newUserEmail"
              class="input"
              type="email"
              placeholder="Email"
            />
          </div>

          <div class="field is-hidden">
            <input
              id="newUserPassword"
              class="input"
              type="password"
              placeholder="Temporary Password"
            />
          </div>

          <label class="checkbox is-hidden">
            <input type="checkbox" id="newIsAdmin" />
            Make Admin
          </label>

          <button id="createNewUser" class="button is-success mt-2 is-hidden">
            Create User
          </button>
        </section>
      </div>
    </div>

    <div id="addRouteModal" class="modal">
      <div class="modal-background"></div>
      <div class="modal-card">
        <header class="modal-card-head">
          <p class="modal-card-title">Add Route</p>
          <button class="delete close-modal" aria-label="close"></button>
        </header>
        <section class="modal-card-body">
          <div class="field">
            <label class="label">Route Name</label>
            <input
              id="route_title"
              class="input"
              type="text"
              placeholder="Enter route name"
            />
          </div>
          <div class="field">
            <label class="label">Strava Embed Link</label>
            <input
              id="strava_info"
              class="input"
              type="text"
              placeholder="Paste Strava link"
            />
          </div>
          <div class="field">
            <label class="label">Distance</label>
            <input
              id="route_distance"
              class="input"
              type="text"
              placeholder="Enter distance"
            />
          </div>
        </section>

        <footer class="modal-card-foot">
          <button class="button is-primary">Save Route</button>
        </footer>
      </div>
    </div>

    <div id="manageRoutesModal" class="modal">
      <div class="modal-background"></div>
      <div class="modal-card">
        <header class="modal-card-head">
          <p class="modal-card-title">Manage Routes</p>
          <button class="delete close-modal" aria-label="close"></button>
        </header>
        <section class="modal-card-body">
          <p>This is where routes will be listed for editing/deletion.</p>
        </section>
      </div>
    </div>

    <div id="createEventModal" class="modal">
      <div class="modal-background"></div>
      <div class="modal-card">
        <header class="modal-card-head">
          <p class="modal-card-title">Create Event</p>
          <button class="delete close-modal" aria-label="close"></button>
        </header>
        <section class="modal-card-body">
          <div class="field">
            <label class="label">Event Title</label>
            <input class="input" type="text" placeholder="Enter event title" />
          </div>
          <div class="field">
            <label class="label">Date</label>
            <input class="input" type="date" />
          </div>
          <div class="field">
            <label class="label">Description</label>
            <textarea
              class="textarea"
              placeholder="Enter event details"
            ></textarea>
          </div>
        </section>
        <footer class="modal-card-foot">
          <button class="button is-primary">Save Event</button>
        </footer>
      </div>
    </div>

    <div id="manageEventsModal" class="modal">
      <div class="modal-background"></div>
      <div class="modal-card">
        <header class="modal-card-head">
          <p class="modal-card-title">Manage Events</p>
          <button class="delete close-modal" aria-label="close"></button>
        </header>
        <section class="modal-card-body">
          <p>This is where events will be listed for editing/deletion.</p>
        </section>
      </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>

    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyC6_OQcfiwzqdG2FDsDXqPJX3gVS8CxyuM",
        authDomain: "marathon-club-site.firebaseapp.com",
        projectId: "marathon-club-site",
        storageBucket: "marathon-club-site.firebasestorage.app",
        messagingSenderId: "229365451201",
        appId: "1:229365451201:web:56b402e5003d5eae024740",
        measurementId: "G-X04J6TBSXY",
      };

      firebase.initializeApp(firebaseConfig);
      const auth = firebase.auth();
      let db = firebase.firestore();
    </script>

    <script src="main.js"></script>
  </body>
</html>
